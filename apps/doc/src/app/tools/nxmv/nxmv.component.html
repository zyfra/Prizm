<prizm-doc-page header="NXMV">
  <div class="page-description" description>
    Этот генератор Nx предназначен для обновления файлов проектов в рабочем пространстве на основе заданной
    конфигурации и схемы. Он позволяет автоматизировать процесс замены и модификации любых файлов в проектах.
  </div>

  <ng-template prizmDocPageTab>
    <h2>Установка</h2>
    <div>
      Перед использованием генератора необходимо установить его в ваше рабочее пространство Nx. Добавьте его в
      зависимости вашего проекта:
    </div>
    <prizm-doc-code
      [code]="'npm install &#64;prizm-ui/nx-mv --save-dev'"
      filename="Установка"
    ></prizm-doc-code>
    <h2>Использование</h2>
    <div>Генератор запускается с помощью команды nx и требует указания схемы и конфигурационного файла.</div>
    <prizm-doc-code
      [code]="
        'nx generate @prizm-ui/nx-mv:apply --name=<project-name> --config=<config-file> [--var<VariableName>=<value>...]'
      "
      filename="Команда для запуска"
    >
      <i>Кликните на нужный файл в табе</i>
    </prizm-doc-code>
    <h3>Параметры</h3>
    <ol>
      <li><code>--name</code> (обязательно): Имя проекта, для которого будет применяться обновление.</li>
      <li>
        <code>--config</code> (опционально): Путь к конфигурационному файлу, описывающему, какие изменения
        необходимо внести. Если не указан ищей файл конфига nxmv.json в рут папке проекта
      </li>
      <li>
        <code> --var[VariableName] </code> (опционально): Дополнительные переменные, которые могут быть
        использованы в шаблонах EJS.
      </li>
    </ol>

    <h2>Пример конфигурационного файла</h2>
    <div>
      Генератор обновляет только файлы с расширениями, указанными в свойствах <code>extFile</code> для файлов
      и <code>extFolder</code> для папок в конфигурационном файле.
    </div>
    <prizm-doc-example id="example" [content]="exampleOfJson">
      <i>Кликните на нужный файл в табе</i>
    </prizm-doc-example>

    <h2>Пояснение свойств</h2>
    <ol>
      <li>
        <code>extFolder</code>: Список расширений папок, которые будут обновлены. Например, если указано
        .ng18, все папки с этим расширением будут обработаны.
      </li>
      <li>
        <code>extFile</code>: Список расширений файлов, которые будут обновлены. Например, если указано .ng18,
        все файлы с этим расширением будут обработаны.
      </li>
      <li>
        <code>all</code>: Если установлено в true, обновляет все проекты в рабочем пространстве. Если false,
        обновляет только указанные проекты.
      </li>
      <li>
        <code>rootChange</code>: Если установлено в true, обновляет файлы в корневой директории проекта.
      </li>
      <li><code>remove</code>: Список файлов, которые будут удалены перед выполнением обновлений.</li>
      <li>
        <code>consts</code>: Константы, которые будут доступны в шаблонах EJS для динамического создания
        файлов. В данном примере, ngVersion будет доступен в шаблонах как переменная.
      </li>
    </ol>

    <h2>Пример запуска генератора</h2>
    <h3>Пример 1: Базовый запуск</h3>
    <prizm-doc-code
      [code]="'nx generate &#64;prizm-ui/nx-mv:apply --name=my-project --config=./nxmv.config.jsonon'"
      filename="Базовый запуск"
    >
      <i>Кликните на нужный файл в табе</i>
    </prizm-doc-code>
    <h3>Пример 2: Запуск с дополнительными переменными</h3>

    <prizm-doc-code
      [code]="
        'nx generate &#64;prizm-ui/nx-mv:apply --name=my-project --config=./nxmv.config.json --var-version=5.0.0-rc.1 --varFeatureFlag=true'
      "
      filename="Запуск с дополнительными переменными"
    >
      <i>Кликните на нужный файл в табе</i>
    </prizm-doc-code>

    <h2>Пример использования шаблонов EJS</h2>
    <div>
      Генератор поддерживает использование шаблонов EJS для динамического создания файлов. Пример
      использования:
    </div>
    <prizm-doc-example id="templates" [content]="exampleOfTemplates">
      <i>Кликните на нужный файл в табе</i>
    </prizm-doc-example>

    <h2>Игнорирование файлов</h2>
    <div>
      Генератор использует файл nxmv.ignore для указания файлов и директорий, которые следует игнорировать при
      обновлении. Формат файла аналогичен .gitignore.
    </div>

    <prizm-doc-example id="ignore" [content]="exampleOfIgnore">
      <i>Кликните на нужный файл в табе</i>
    </prizm-doc-example>

    <h2>Заключение</h2>
    <div>
      Генератор <code>&#64;prizm-ui/nx-mv:apply</code>
      предоставляет мощный и гибкий способ автоматизировать обновление файлов проектов в рабочем пространстве
      Nx.
      <br />
      Используйте конфигурационные файлы и шаблоны EJS для создания и модификации файлов на лету.
      <br />
      Убедитесь, что вы указали необходимые расширения файлов и папок в конфигурационном файле, чтобы
      генератор знал, какие файлы обновлять.
      <br />
      <br />
      Если у вас возникнут вопросы или проблемы, пожалуйста, откройте issue в репозитории проекта на GitHub.
    </div>
  </ng-template>
</prizm-doc-page>
